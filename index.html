<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KoÅ‚o Fortuny PRO</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: url("tlo.jpg") center/cover no-repeat;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  background: rgba(0,0,0,0.65);
  padding: 20px;
  border-radius: 14px;
  width: 340px;
  color: white;
  text-align: center;
}

.pointer {
  width: 0;
  height: 0;
  border-left: 14px solid transparent;
  border-right: 14px solid transparent;
  border-bottom: 24px solid red;
  margin: 0 auto -8px auto;
}

.wheel-wrapper {
  position: relative;
  width: 280px;
  height: 280px;
  margin: 0 auto 15px auto;
}

#wheel {
  width: 100%;
  height: 100%;
  transition: transform 4s cubic-bezier(0.25,1,0.5,1);
}

.controls input, button {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  font-size: 15px;
  border-radius: 6px;
  border: none;
}

button {
  background: #00c853;
  font-weight: bold;
}

.option {
  background: #222;
  color: white;
}

.result {
  margin-top: 14px;
  font-size: 22px;
}
</style>
</head>

<body>

<div class="container">
  <h2>ðŸŽ¡ KoÅ‚o Fortuny</h2>

  <div class="pointer"></div>

  <div class="wheel-wrapper">
    <svg id="wheel" viewBox="0 0 300 300"></svg>
  </div>

  <div class="controls" id="options">
    <input class="option" placeholder="Opcja 1 (WYGRYWA)">
    <input class="option" placeholder="Opcja 2">
  </div>

  <button onclick="addOption()">âž• Dodaj opcjÄ™</button>
  <button onclick="spin()">ZAKRÄ˜Ä†</button>

  <div class="result" id="result"></div>
</div>

<script>
let rotation = 0;
const colors = ["#ff5252","#ffeb3b","#40c4ff","#69f0ae","#b388ff","#ff8a65"];

function addOption() {
  const input = document.createElement("input");
  input.className = "option";
  input.placeholder = "Opcja";
  document.getElementById("options").appendChild(input);
}

function drawWheel(options) {
  const svg = document.getElementById("wheel");
  svg.innerHTML = "";
  const cx = 150, cy = 150, r = 140;
  const angle = 360 / options.length;

  options.forEach((text, i) => {
    const start = angle * i;
    const end = start + angle;

    const large = angle > 180 ? 1 : 0;

    const x1 = cx + r * Math.cos(Math.PI * start / 180);
    const y1 = cy + r * Math.sin(Math.PI * start / 180);
    const x2 = cx + r * Math.cos(Math.PI * end / 180);
    const y2 = cy + r * Math.sin(Math.PI * end / 180);

    const path = document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d",
      `M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 ${large} 1 ${x2} ${y2} Z`
    );
    path.setAttribute("fill", colors[i % colors.length]);
    svg.appendChild(path);

    const label = document.createElementNS("http://www.w3.org/2000/svg","text");
    label.setAttribute("x", cx);
    label.setAttribute("y", cy - r + 40);
    label.setAttribute("fill", "black");
    label.setAttribute("font-size", "14");
    label.setAttribute("font-weight", "bold");
    label.setAttribute("text-anchor", "middle");
    label.setAttribute("transform",
      `rotate(${start + angle/2} ${cx} ${cy})`
    );
    label.textContent = text;
    svg.appendChild(label);
  });
}

function spin() {
  const inputs = document.querySelectorAll(".option");
  const options = [...inputs].map(i => i.value.trim()).filter(Boolean);

  if (options.length < 2) {
    alert("Dodaj przynajmniej 2 opcje");
    return;
  }

  drawWheel(options);

  const segmentAngle = 360 / options.length;

  // ðŸ‘‰ OSZUSTWO: zawsze 1 opcja
  const target =
  360 - (winningIndex * segmentAngle + segmentAngle / 2) - 90;

  const wheel = document.getElementById("wheel");

  wheel.style.transition = "none";
  wheel.style.transform = `rotate(${rotation % 360}deg)`;

  setTimeout(() => {
    wheel.style.transition =
      "transform 4s cubic-bezier(0.25,1,0.5,1)";
    rotation += 360 * 6 + target;
    wheel.style.transform = `rotate(${rotation}deg)`;
  }, 50);

  setTimeout(() => {
    document.getElementById("result").innerText =
      "WypadÅ‚o: " + options[0];
  }, 4200);
}
</script>

</body>
</html>
